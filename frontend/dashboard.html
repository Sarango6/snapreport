<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Dashboard - SnapReport</title>
        <link rel="stylesheet" href="css/style.css">
        <script>
            // Simple login check: require 'isLoggedIn' in localStorage
            if (!localStorage.getItem('isLoggedIn')) {
                window.location.href = 'login.html';
            }
        </script>
</head>
<body>
    <!-- FLOATING BUBBLE BACKGROUND -->
    <div class="bubble-bg">
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
    </div>

    <!-- HEADER -->
    <header>
        <div class="container">
            <div id="branding">
                <img src="img/logo.png" alt="SnapReport Logo" class="logo">
                <h1>SnapReport</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="report.html">Report</a></li>
                     <li id="profileBtn" class="profile-menu" style="display:none;">
                    <img src="img/user-icon.png" alt="Profile" class="profile-icon">
                    <ul class="dropdown">
                        <li><a href="profile.html">My Profile</a></li>
                        <li><a href="#" id="logoutoption">Logout</a></li>
                    </ul>
                </li>
            </nav>
        </div>
    </header>

    <main>
        <div class="dashboard-container">
            <h2 class="dashboard-title"><i class='bx bx-list-ul'></i> Reported Issues</h2>
            <div id="adminFilters" class="admin-filters" style="display:none;">
                <label for="filterDept">Department:</label>
                <select id="filterDept">
                    <option value="">All</option>
                    <option value="PWD">PWD</option>
                    <option value="Electricity">Electricity</option>
                    <option value="Water">Water</option>
                    <option value="Traffic">Traffic</option>
                </select>
                <label for="filterType">Issue Type:</label>
                <select id="filterType" disabled>
                    <option value="">All</option>
                </select>
            </div>
            <div id="issuesList" class="issues-list">Loading...</div>
        </div>
    </main>

    <!-- FOOTER -->
    <footer>
        <p>SnapReport &copy; 2025 | Designed by Your Team</p>
    </footer>

    <script src="js/main.js"></script>
</body>

<script>
// Show/hide profile & logout buttons based on login state
document.addEventListener('DOMContentLoaded', function() {
    const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
    const profileBtn = document.getElementById("profileBtn");
    const logoutBtn = document.getElementById("logoutBtn");
    const loginLink = Array.from(document.querySelectorAll('nav ul li a'))
                            .find(a => a.textContent.trim().toUpperCase() === 'LOGIN');

    if (isLoggedIn) {
        if (profileBtn) profileBtn.style.display = "inline-block";
        if (logoutBtn) logoutBtn.style.display = "inline-block";
        if (loginLink) loginLink.style.display = "none";
    } else {
        if (profileBtn) profileBtn.style.display = "none";
        if (logoutBtn) logoutBtn.style.display = "none";
        if (loginLink) loginLink.style.display = "inline-block";
    }

    // Logout functionality
    if (logoutBtn) {
        logoutBtn.addEventListener("click", function(e) {
            e.preventDefault();
            localStorage.removeItem("isLoggedIn");
            window.location.href = "index.html"; // Redirect after logout
        });
    }
});
</script>

</html>
